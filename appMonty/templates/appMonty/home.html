
<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        {% load static %}
        <meta charset="utf-8">
        {% comment %} <link rel="stylesheet" type="text/css" href="{% static 'appMonty/style.css' %}"> {% endcomment %}
        <link rel="stylesheet" type="text/css" href="{% static 'appMonty/style.css' %}">
        <title></title>
    </head>
    <body>
        <div id="app">
            {% for item in original %}
                <p>Original Correct: {{ item.correct }}</p>
                <p>Original Wrong{{ item.wrong}} </p>

                {% comment %} <p>Changed Correct: {{ item.changedCorrect }}</p>
                <p>Changed Wrong{{ item.changedWrong}} </p> {% endcomment %}
                
            {% endfor %} 

            <div id="gameFace">
                <div id="door1">
                    <p v-on:click='door1'>door</p>
                </div>
                
                <div id="door2">
                        <p v-on:click='door2'>door</p>
                </div>
                
                <div id="door3">
                        <p v-on:click='door3'>door</p>
                </div>
                      {% csrf_token %}
                <button v-on:click="axiosPost">Test</button>
            </div>
        </div>

        <script src="https://unpkg.com/vue@next"></script>

        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>

            let door1 = document.getElementById('door1')
            let door2 = document.getElementById('door2')
            let door3 = document.getElementById('door3')

            let door1Wins = false
            let door2Wins = false
            let door3Wins = false

            let firstRound = true
            let door = ''

            let winningNum = Math.floor(Math.random() * 3) + 1
            let oneOrTwo = Math.floor(Math.random() * + 2) + 1

            const App = {

                delimiters: ['[[', ']]'],

                data() {
                  return {
                    csrfmiddlewaretoken: '',
                    
                    cat: 'cat'
                  }
                },

                methods: {
                    door1(){
                        if (firstRound){
                            if (winningNum == 1){
                                oneOrTwo += 1
                                door = 'door' +oneOrTwo
                                console.log(door)
                                document.getElementById(door).style.visibility = 'hidden'
                                firstRound = false
                                
                            }
                            else if ( winningNum == 2){
                                document.getElementById('door3').style.visibility = 'hidden'
                                firstRound = false
                            }
                            else if (winningNum == 3){
                                document.getElementById('door2').style.visibility = 'hidden'
                                firstRound = false
                            }
                        }
                        else{
                            if (winningNum == 1){
                                alert('you win')
                            }
                            else{
                                alert('you lose')
                            }
                        }
                    },
                    door2(){
                        if (firstRound){
                            if (winningNum == 2){
                                if (oneOrTwo == 2){
                    
                                    document.getElementById('door3').style.visibility = 'hidden'
                                    firstRound = false
                                }
                                else{
                                    door = 'door' +oneOrTwo
                                    document.getElementById(door).style.visibility = 'hidden'
                                    firstRound = false
                                }
                            }
                            else if ( winningNum == 1){
                                document.getElementById('door3').style.visibility = 'hidden'
                                firstRound = false
                            }
                            else if (winningNum == 3){
                                document.getElementById('door1').style.visibility = 'hidden'
                                firstRound = false
                            }
                        }
                        else{
                            if (winningNum == 2){
                                alert('you win')
                            }
                            else{
                                alert('you lose')
                            }
                        }
                    },
                    
                    door3(){
                        if (firstRound){ 
                            if (winningNum == 3){
                                door = 'door' +oneOrTwo
                                document.getElementById(door).style.visibility = 'hidden'
                                firstRound = false
                            }
                            else if (winningNum == 2) {
                                document.getElementById('door1').style.visibility = 'hidden'
                                firstRound = false
                            }
                            else  if (winningNum == 1){
                                document.getElementById('door2').style.visibility = 'hidden'
                                firstRound = false
                            }
                        }
                        else{
                            if (winningNum == 3){
                                alert('you win')
                            }
                            else{
                                alert('you lose')
                            }
                        }
                    },

                    oneOrTwo() {
                        return Math.floor(Math.random() * + 2) + 1
                    },
                    
                    winningNum() {
                        return Math.floor(Math.random() * 3) + 1
                    },
                    axiosPost: function() {
                        axios({
                            url: "{% url 'appMonty:frontendpost' %}",
                            method: 'post',
                            data: {
                                changeCorrect: 2,
                                changedWrong: 3,
                            },
                            headers: {
                                'X-CSRFToken': this.csrfmiddlewaretoken
                            }
                          }).then(response => {
                            console.log(response.data, 'cat')
                          })
           
                      },
                },
                mounted() {
                    console.log(this.oneOrTwo())
                    console.log(door2Wins, 'd2wins')
                    this.csrfmiddlewaretoken = document.querySelector('input[name="csrfmiddlewaretoken"]').value
                }
              } 
              Vue.createApp(App).mount('#app')
        </script>
    </body>
</html>